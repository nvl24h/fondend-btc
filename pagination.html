<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <title>Phân Trang Sản Phẩm</title>
        <style>
            /* Kiểu dáng cho danh sách sản phẩm */
            .product-list {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 20px;
            }

            .product-list div {
                background-color: #f4f4f4;
                padding: 20px;
                border-radius: 8px;
                text-align: center;
                font-size: 18px;
            }

            /* Kiểu dáng cho pagination */
            .pagination {
                display: flex;
                justify-content: center;
                align-items: center;
                margin-top: 20px;
            }

            .pagination button {
                background-color: #4caf50;
                color: white;
                border: none;
                padding: 10px 20px;
                cursor: pointer;
                margin: 0 5px;
                border-radius: 5px;
            }

            .pagination button:disabled {
                background-color: #ccc;
                cursor: not-allowed;
            }

            .pagination .page-numbers {
                display: flex;
                align-items: center;
            }

            .pagination .page-numbers button,
            .pagination .page-numbers span {
                background-color: white;
                color: black;
                border: 1px solid #ddd;
                padding: 10px;
                margin: 0 5px;
                cursor: pointer;
                border-radius: 5px;
            }

            .pagination .page-numbers button.active {
                background-color: #4caf50;
                color: white;
                border: none;
            }

            .pagination .page-numbers span {
                cursor: default;
                pointer-events: none;
            }
        </style>
    </head>
    <body>
        <div class="product-list">
            <!-- Sản phẩm sẽ được render tại đây -->
        </div>

        <div class="pagination">
            <button class="prev-page" onclick="changePage('prev')">Previous</button>
            <div class="page-numbers"></div>
            <button class="next-page" onclick="changePage('next')">Next</button>
        </div>

        <script>
            const products = [
                "Product 1",
                "Product 2",
                "Product 3",
                "Product 4",
                "Product 5",
                "Product 6",
                "Product 7",
                "Product 8",
                "Product 9",
                "Product 10",
                "Product 11",
                "Product 12",
                "Product 13",
                "Product 14",
                "Product 15",
                "Product 16",
                "Product 17",
                "Product 18",
                "Product 19",
                "Product 20",
                "Product 21",
                "Product 22",
                "Product 23",
                "Product 24",
                "Product 25",
                "Product 26",
                "Product 27",
                "Product 28",
                "Product 29",
                "Product 30",
                // ... thêm sản phẩm nếu cần
            ];

            let currentPage = 1;
            const itemsPerPage = 4;
            const maxPageButtons = 10; // Số nút trang tối đa hiển thị

            function renderProducts(page) {
                const productList = document.querySelector(".product-list");
                productList.innerHTML = "";

                const start = (page - 1) * itemsPerPage;
                const end = page * itemsPerPage;
                const paginatedProducts = products.slice(start, end);

                paginatedProducts.forEach((product) => {
                    const productDiv = document.createElement("div");
                    productDiv.textContent = product;
                    productList.appendChild(productDiv);
                });
            }

            function renderPagination() {
                const pageNumbers = document.querySelector(".page-numbers");
                pageNumbers.innerHTML = "";

                const totalPages = Math.ceil(products.length / itemsPerPage);

                if (totalPages <= maxPageButtons) {
                    for (let i = 1; i <= totalPages; i++) {
                        createPageButton(i, pageNumbers);
                    }
                } else {
                    // Luôn hiển thị nút trang đầu tiên
                    createPageButton(1, pageNumbers);

                    // Xác định điểm bắt đầu và kết thúc cho các nút trang trung tâm
                    let startPage = Math.max(2, currentPage - 2);
                    let endPage = Math.min(totalPages - 1, currentPage + 2);

                    // Điều chỉnh nếu currentPage ở gần đầu
                    if (currentPage <= 4) {
                        startPage = 2;
                        endPage = 5;
                    }

                    // Điều chỉnh nếu currentPage ở gần cuối
                    if (currentPage >= totalPages - 3) {
                        startPage = totalPages - 4;
                        endPage = totalPages - 1;
                    }

                    // Thêm dấu chấm lửng sau nút trang đầu tiên nếu cần
                    if (startPage > 2) {
                        const dots = document.createElement("span");
                        dots.textContent = "...";
                        pageNumbers.appendChild(dots);
                    }

                    // Thêm các nút trang trung tâm
                    for (let i = startPage; i <= endPage; i++) {
                        createPageButton(i, pageNumbers);
                    }

                    // Thêm dấu chấm lửng trước nút trang cuối cùng nếu cần
                    if (endPage < totalPages - 1) {
                        const dots = document.createElement("span");
                        dots.textContent = "...";
                        pageNumbers.appendChild(dots);
                    }

                    // Luôn hiển thị nút trang cuối cùng
                    createPageButton(totalPages, pageNumbers);
                }
            }

            function createPageButton(page, container) {
                const button = document.createElement("button");
                button.textContent = page;
                if (page === currentPage) {
                    button.classList.add("active");
                }
                button.addEventListener("click", () => {
                    currentPage = page;
                    updatePagination();
                });
                container.appendChild(button);
            }

            function updatePagination() {
                renderProducts(currentPage);
                renderPagination();
                const totalPages = Math.ceil(products.length / itemsPerPage);
                document.querySelector(".prev-page").disabled = currentPage === 1;
                document.querySelector(".next-page").disabled = currentPage === totalPages;
            }

            function changePage(direction) {
                const totalPages = Math.ceil(products.length / itemsPerPage);
                if (direction === "prev" && currentPage > 1) {
                    currentPage--;
                } else if (direction === "next" && currentPage < totalPages) {
                    currentPage++;
                }
                updatePagination();
            }

            // Khởi tạo khi trang load
            updatePagination();
        </script>
    </body>
</html>
